<!DOCTYPE html>
<html>
		
  <head>
    <meta charset="utf-8">
      <title>Moon Test</title>
	<script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
	<script src="https://cdn.rawgit.com/AltspaceVR/aframe-altspace-component/v1.3.1/dist/aframe-altspace-component.min.js"></script>
	<script src="https://sdk.altvr.com/libs/altspace.js/0.28.1/altspace.min.js"></script>
	<script src="https://cdn.rawgit.com/norybiak/UltimateLoader/master/dist/UltimateLoader.min.js"></script>
	<script src="https://rawgit.com/ngokevin/aframe-template-component/master/dist/aframe-template-component.min.js"></script>
    </head>
  <body>

    <!-- set up the scene -->
    <a-scene altspace= "fullspace: true" sync-system='author: sven118; app: moontest; refUrl: https://moontest-65076.firebaseio.com; instance: KZPZ9R3_Vsuqhgz3Ynm'>
	    

	    
    <!-- preload all our textures -->
    <a-assets>
        <img id='earth' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/earth3.jpg'/>
        <img id='stars' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/stars.jpg'/>
        <img id='moon' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/moon.jpg'/>
        <img id='sun' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/sun.jpg'/>
        <img id='jupiter' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/Jupiter.jpg'/>
        <img id='mars' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/Mars.jpg'/>
        <img id='saturn' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/saturn.jpg'/>
        <img id="ring" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/satring.png">
        <img id='venus' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/venus.jpg'/>
        <img id='mercury' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/mercury.jpg'/>
        <img id='uranus' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/uranus.jpg'/>
        <img id='uranusring' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/uranusring.png'/>
        <img id='neptune' crossorigin src='https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/neptune.jpg'/>
        <img id="floortile" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/floorglass4.png"/>
	<img id="floor2" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/floor2.jpg"/>
	<img id="disco" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/disco2.jpg"/>
	<img id="rail" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/rail.png"/>
	<img id="ground" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/ground.jpg"/>
	<img id="horizon" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/Sky2.jpg"/>
	<img id="night" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/night.png"/>
	<img id="water" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/83f9f4d6/moontest-master/moontest/models/water1.jpg"/>
	<audio id="naturesounds" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/58b57dcb/moontest-master/moontest/sounds/naturesounds1.wav"/>
        <a-asset-item id="ship-obj" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/spacestation/spacestation15.obj"></a-asset-item>
        <a-asset-item id="ship-mtl" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/models/spacestation/spacestation15.mtl"></a-asset-item>
        <a-asset-item id="ring-obj" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/0a43bcce/moontest-master/moontest/models/spacestation/spacering2.obj"></a-asset-item>
        <a-asset-item id="ring-mtl" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/0a43bcce/moontest-master/moontest/models/spacestation/spacering2.mtl"></a-asset-item>
	<a-asset-item id="rocket-obj" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/ship/rocket/rocket.obj"></a-asset-item>
        <a-asset-item id="rocket-mtl" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/master/moontest-master/moontest/ship/rocket/rocket.mtl"></a-asset-item>
	<a-asset-item id="statue-obj" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/b8d25840/moontest-master/moontest/models/statue/goldstatue3.obj"></a-asset-item>
        <a-asset-item id="statue-mtl" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/e1ad38b9/moontest-master/moontest/models/statue/goldstatue3.mtl"></a-asset-item>
	<a-asset-item id="landscape-obj" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/acb07d29/moontest-master/moontest/models/landscape/landscape3.obj"></a-asset-item>
        <a-asset-item id="landscape-mtl" crossorigin src="https://cdn.rawgit.com/Sven118/Svens-Apps/acb07d29/moontest-master/moontest/models/landscape/landscape3.mtl"></a-asset-item>
	<script id="dancefloor" type="text/x-nunjucks-template">
          {% for x in range(0, 30) %}
            {% for z in range(0, 20) %}
              <a-entity template="src: dancetile.template; type: handlebars"
                        data-position="{{ x }} 0 {{ z }}"></a-entity>
            {% endfor %}
          {% endfor %}
	</script>
	</a-assets>
	    
	    <!-- Loading Bubble 
<a-sphere id='loadingbubble' position='0 2 0'
		radius='1'
		color='#7F7FFF'
		side='double'
		class="not-clickable" 
		altspace-collider="enabled: false">
	<a-entity position='0 0 -.8'
		n-text='text: Welcome! Hold Still; fontSize: 1'></a-entity>
	<a-entity position='0 -.1 -.8'
		n-text='text: while everything loads.; fontSize: 1'></a-entity>
</a-sphere> -->

      <!-- Add Planets -->
     <a-sphere id='earth' position='1000 0 500' radius='250' material='src: #earth;'>
        <a-animation to='0 360 0' 
		     easing='linear' 
		     dur='400000' 
		     repeat='indefinite'/>
    </a-sphere>
	<a-sphere id='nightearth' position='1000 0 500' rotation='0 80 -20'
		radius='258'
		transparent='true' 
		material='src: #night'
		class="not-clickable" 
		altspace-collider="enabled: false">
	</a-sphere>
	<a-sphere id='atmosphere' position='1000 0 500'
		radius='253'
		color='#7F7FFF'  
		opacity='.2'
		class="not-clickable" 
		altspace-collider="enabled: false">
	</a-sphere>
	    
      <!--Add Moon Orbit -->          
      <a-entity id="earth" geometry="primitive: sphere; radius: 5" 
	material="visible: false"
	position="1000 0 500">
       <a-entity id="moonOrbit" sync-transform>
            <a-animation attribute="rotation"
                 dur="305000"
                 to="0 360 0"
                 repeat="indefinite" 
                 easing="linear"></a-animation>
            <a-entity id="moon" geometry="primitive: sphere; radius: 50; segmentsWidth: 10; segmentsHeight: 20" 
		material="src: #moon;"
		position="-1300 50 0"
		n-sphere-collider="type: environment; radius: 50"></a-entity>
            </a-entity>
        </a-entity>
      
     <a-sphere position='0 500 -1500' radius='60' material='src: #jupiter;'
	       geometry="segmentsWidth: 8; segmentsHeight: 8"
	       n-sphere-collider="type: environment; radius: 60">
        <!-- add an animation to make it rotate -->
        <a-animation to='0 360 0' 
		     easing='linear' 
		     dur='100000' 
		     repeat='indefinite'/>
      </a-sphere>
      
      <a-sphere position='0 700 2000' radius='50' material='src: #sun;'
		geometry="segmentsWidth: 8; segmentsHeight: 8"
		n-sphere-collider="type: environment; radius: 50">
        <!-- add an animation to make it rotate -->
        <a-animation to='0 360 0' 
		     easing='linear' 
		     dur='20000' 
		     repeat='indefinite'/>
      </a-sphere>
      
      <a-sphere position='400 100 -500' radius='25' material='src: #mars;'
		geometry="segmentsWidth: 8; segmentsHeight: 8"
		n-sphere-collider="type: environment; radius: 25">
        <!-- add an animation to make it rotate -->
        <a-animation to='0 360 0' 
		     easing='linear' 
		     dur='100000' 
		     repeat='indefinite'/>
      </a-sphere>
      
      <a-sphere position='-1000 200 -2000' radius='40' rotation='0 90 0' material='src: #saturn;'
		geometry="segmentsWidth: 8; segmentsHeight: 8"
		n-sphere-collider="type: environment; radius: 40">
        <!-- add an animation to make it rotate -->
        <a-animation to='0 360 0' 
		     easing='linear' 
		     dur='100000' 
		     repeat='indefinite'/>
      </a-sphere>
      
      <a-sphere position='-200 300 700' radius='30' material='src: #venus;'
		geometry="segmentsWidth: 8; segmentsHeight: 8"
		n-sphere-collider="type: environment; radius: 30">
        <a-animation to='0 360 0' 
		     easing='linear' 
		     dur='250000' 
		     repeat='indefinite'/>
      </a-sphere>
	    
      <!-- Add Mercury Orbit -->
      <a-entity id="sun" geometry="primitive: sphere; radius: 1" 
            material="color: #FFC107"
            position='0 700 2000'>
      <a-entity id="mercuryOrbit">
         <a-animation attribute="rotation"
                 dur="100000"
                 to="0 360 0"
                 repeat="indefinite" 
                 easing="linear"></a-animation>
           <a-entity id="mercury" geometry="primitive: sphere; radius: 10 segmentsWidth: 8; segmentsHeight: 8" 
              material="src: #mercury;"
              position="60 -30 0"
		n-sphere-collider="type: environment; radius: 10"></a-entity>
           </a-entity>
      </a-entity>
      
      <a-sphere position='2000 -100 -300' radius='20' rotation='0 90 0' material='src: #uranus;'
		geometry="segmentsWidth: 8; segmentsHeight: 8"
		n-sphere-collider="type: environment; radius: 20">
        <!-- add an animation to make it rotate -->
        <a-animation to='360 0 0' 
		     easing='linear' 
		     dur='100000' 
		     repeat='indefinite'/>
      </a-sphere>
      
      <a-sphere position='-2000 50 -500' radius='15' rotation='0 90 0' material='src: #neptune;'
		geometry="segmentsWidth: 8; segmentsHeight: 8"
		n-sphere-collider="type: environment; radius: 15">
        <!-- add an animation to make it rotate -->
        <a-animation to='0 360 0' 
		     easing='linear' 
		     dur='100000' 
		     repeat='indefinite'/>
      </a-sphere>
            
      <a-plane material='src: #floortile; repeat: 32 32' position='0 .005 0' height="128" width="128" rotation="-90 180 0" transparent='true' class="not-clickable" 
            altspace-cursor-collider="enabled: false">
      </a-plane>
       
	<!-- Add Planet Rings -->
	<a-ring src="#ring"
	      position='-1000 200 -2000'
	      radius-inner='40'
	      radius-outer='110'
	      transparent='true'
	      side='double'
	      rotation='90 90 45'
	      n-box-collider="type: environment size: 110 .01 110"></a-ring>
      <a-ring src="#uranusring"
	      position='2000 -100 -300'
	      radius-inner='25'
	      radius-outer='50'
	      transparent='true'
	      side='double'
	      rotation='0 45 0'>
      </a-ring>
      
      <!-- Add Spaceship -->
	<a-entity obj-model="obj: #ship-obj; mtl: #ship-mtl" position='0 -18 0' scale='70 70 70' 
		n-mesh-collider="type: environment; convex: false"></a-entity>
	<a-entity obj-model="obj: #ring-obj; mtl: #ring-mtl" position='0 -18 0' scale='70 70 70'
		n-mesh-collider="type: environment; convex: false">
        <a-animation to='0 0 360' 
		     easing='linear' 
		     dur='800000' 
		     repeat='indefinite'/>
      </a-entity>
      
	<!-- Add Skybox -->    
	<a-sky src='#stars' radius='2500' class="not-clickable" altspace-cursor-collider="enabled: false" geometry="segmentsWidth: 8; segmentsHeight: 8"></a-sky>
	    
	<a-entity obj-model="obj: #statue-obj; mtl: #statue-mtl" position='-4.5 0 0' scale='.45 .45 .45' rotation='0 90 0'
		  n-mesh-collider="type: environment"></a-entity>
	    
	    <a-entity id='rocket' obj-model="obj: #rocket-obj; mtl: #rocket-mtl" position='0 0 -8' scale='2 2 2' n-mesh-collider="type: environment"></a-entity>
	    
<a-entity id='spawn-spot' position="0 .2 0">
	<a-entity n-object="res: architecture/floor-slice-concave-4r" position="4 0 0"></a-entity>
	<a-entity n-object="res: architecture/floor-slice-concave-4r" position="0 0 -4" rotation="0 90 0"></a-entity>
	<a-entity n-object="res: architecture/floor-slice-concave-4r" position="-4 0 0" rotation="0 180 0"></a-entity>
	<a-entity n-object="res: architecture/floor-slice-concave-4r" position="0 0 4" rotation="0 270 0"></a-entity>
</a-entity>
	    
	    
	    
	    
	    
	    
	    
	<!-- Add Collider Objects -->
<a-entity class='tractorbeam' position='0 0 28.5'>  
	<a-cylinder position='0 15 0' material='color: #3A6AE1' side="double" opacity="0.15" rotation='0 45 0' radius='1.5' height='30' class="not-clickable" 
            altspace-cursor-collider="enabled: false"></a-cylinder>
	<a-box id="lift"
	       	material="visible: false"
	       	n-sound="res: ui/notify; volume: 1; oneshot: true; on: animationstart"
		depth="3" height=".1" width="3"
            	position='0 -.1 0'
		n-mesh-collider="type: environment">
		<a-animation begin='up' attribute="position"
			direction='normal'
			from='0 -.1 0' to='0 15 0' 
			ease-out='linear'
			fill='both'
			dur='20000' 
			repeat='0'/>
	</a-box>
	
	<a-entity id='upbutton' geometry="primitive: sphere; radius: .1" material='color: #1DD100'  position="1 1 -1.5" sync-color
		wire="on: click; emit: up; targets: #lift"
		wire__0="on: click; emit: buttonchange; targets: #upbutton">
		<a-animation begin='buttonchange' attribute="material.color" 
			     from='red' to='#1DD100'
			     delay='20000'
			     dur='200'
			     fill='both'
			     repeat='0' 
			     direction='backwards'/>
	</a-entity>
	<a-entity n-billboard n-text="fontSize: 2; text: up" position="1 1.5 -1.5"></a-entity>
</a-entity>
	
	
	    
	    
<a-sphere position='0 30 28.5' color='#717171' radius="2.5" geometry="segmentsWidth: 8; segmentsHeight: 8">
		<a-animation to='0 360 0' 
		     easing='linear' 
		     dur='250' 
		     repeat='indefinite'/>
	    </a-sphere>
	    
<a-sphere position='0 30 28.5' color='#3A6AE1' radius="3" opacity="0.15"></a-sphere>
	    
	<a-cylinder position='0 28 28.5'
			material='src: #floor2'
			side="double"
			open-ended="true"
			radius='1.6' height='4'>
		<a-animation to='0 360 0' 
			easing='linear' 
			dur='250' 
			repeat='indefinite'/>
	</a-cylinder>
	    
	<!-- Inner Earth -->
	    <a-sphere id='earthclouds'
		      material='src: #horizon; side: double'
		      transparent='true'
		      position='1000 0 500' radius='220'>
		<a-animation to='0 360 0' 
		     easing='linear' 
		     dur='800000' 
		     repeat='indefinite'/>
	    </a-sphere>
	    
	    <a-entity obj-model="obj: #landscape-obj; mtl: #landscape-mtl" position='1000 0 500' scale='3 3 3' class="not-clickable" 
		altspace-collider="enabled: false" n-mesh-collider="type: environment; convex: false"></a-entity>
	    
	    <a-circle id='river'
		      material='src: #water; side: double; repeat: 105 105'
		      position='1000 -2 500' radius='220'
		      rotation="-90 0 0"
		      opacity="0.5"
		      altspace-cursor-collider="enabled: false"
		      n-sound="src: sounds/riversounds.wav; volume: .5; loop: true; autoplay: true; rolloff: linear; minDistance: 30; maxDistance: 150">
	    <a-animation to='360 0 360' 
		     easing='linear' 
		     dur='400000' 
		     repeat='indefinite'/>
	    </a-circle>	
	    
		<a-sphere material="visible: false"
		      position='1000 10 500'
		      radius='5'
		      n-sound="src: sounds/naturesounds1.wav; volume: .3; loop: true; autoplay: true; rolloff: linear; minDistance: 150; maxDistance: 200"></a-sphere>
		<a-sphere material="visible: false"
		      position='1100 -1 610'
		      radius='5'
		      n-sound="src: sounds/riversounds.wav; volume: .5; loop: true; autoplay: true; rolloff: linear; minDistance: 30; maxDistance: 150"></a-sphere>
	    <a-sphere material="visible: false"
		      position='980 -1 380'
		      radius='5'
		      n-sound="src: sounds/riversounds.wav; volume: .5; loop: true; autoplay: true; rolloff: linear; minDistance: 30; maxDistance: 150"></a-sphere>
	    <a-sphere material='color: white' 
		      position='1000 350 500'
		      radius='10'
		      n-sphere-collider="type: environment; radius: 10"></a-sphere>
	   
<!-- Dancefloor Platform -->
<a-entity class='platform' position='0 15 40'>    
		<!-- <a-entity id="platform1" geometry="primitive: box;"
			rotation='0 90 0'
			scale='20 .1 30'
			material='src: #floor2; repeat: 20 30'
            		position='0 0 0'
			n-mesh-collider="type: environment">
	    	</a-entity> -->
		    
		<a-entity id="rail-1" geometry="primitive:box;"
			transparent="true"
			rotation='0 90 0'
			scale='.05 .5 13.5'
			material='src: #rail; repeat: 13.5 1'
			position= '8.25 .5 -10'
			n-mesh-collider="type: environment">
		</a-entity>
		
		<a-entity id="rail-2" geometry="primitive:box;"
			transparent="true"
			rotation='0 90 0'
			scale='.05 .5 13.5'
			material='src: #rail; repeat: 13.5 1'
			position= '-8.25 .5 -10'
			n-mesh-collider="type: environment">
		</a-entity>
		    
		<a-entity id="rail-3" geometry="primitive:box;"
			transparent="true"
			rotation='0 90 0'
			scale='20 .5 .05'
			material='src: #rail; repeat: 20 1'
			position= '-15 .5 0'
			n-mesh-collider="type: environment">
		</a-entity>
		    
		<a-entity id="rail-4" geometry="primitive:box;"
			transparent="true"
			rotation='0 90 0'
			scale='20 .5 .05'
			material='src: #rail; repeat: 20 1'
			position= '15 .5 0'
			n-mesh-collider="type: environment">
		</a-entity>
		    
		<a-entity id="rail-5" geometry="primitive:box;"
			transparent="true"
			rotation='0 90 0'
			scale='.05 .5 30'
			material='src: #rail; repeat: 30 1'
			position= '0 .5 10'
			n-mesh-collider="type: environment">
		</a-entity>
	
		<a-entity class="discofloor" position="-14.5 -.5 -9.5">   
			<a-entity id="discof" template="src: #dancefloor"></a-entity>
		</a-entity>
</a-entity>
	    
	    
	<a-entity class="Billboard" id='billboard' position="0 0 0">

		<a-entity position='0 0 0' rotation='0 90 0' scale="0.3 0.3 0.3">

			<a-entity position='0 6 -0.6' rotation='0 180 0'
				n-text='text: Welcome; fontSize: 15'></a-entity>
			<a-entity position='0 4 -0.6' rotation='0 180 0'
				n-text='text: to the; fontSize: 7'></a-entity>
			<a-entity position='0 2 -0.6' rotation='0 180 0'
				n-text='text: Observation Deck; fontSize: 13;'></a-entity>
			<a-entity id="backdrop" scale='1.7 1.8 1' position="0 0.5 0">
				<a-entity n-object="res:architecture/wall-4w-4h" rotation="0 90 0" position="0 0 0"></a-entity>
				<a-entity n-object="res:architecture/wall-4w-4h" rotation="0 90 0" position="-4 0 0"></a-entity>
			</a-entity>
		</a-entity> 
		
			<a-animation attribute="position"
			     direction='alternate' 
			     from='6 .5 0' to='6 1.5 0' 
			     ease-in-out='linear' 
			     dur='6000' 
			     repeat='indefinite'/>
                </a-entity>
	    
	    <a-entity class="Billboard-gameroom" id='billboard-gameroom' position="8 30 -2" rotation='0 90 0'>

		<a-entity position='6 1 0' rotation='0 90 0' scale=".8 .8 .8">

			<a-entity position='0 4 -0.6' rotation='0 180 0'
				n-text='text: GAME ROOM; fontSize: 25'></a-entity>
			<a-entity id="backdrop" scale='1.7 1.8 1' position="0 0.5 0">
				<a-entity n-object="res:architecture/wall-4w-4h" rotation="0 90 0" position="0 0 0"></a-entity>
				<a-entity n-object="res:architecture/wall-4w-4h" rotation="0 90 0" position="-4 0 0"></a-entity>
			</a-entity>
		</a-entity> 
		
			<a-animation attribute="position"
			     direction='alternate' 
			     from='8 25.5 -4' to='8 26.5 -4' 
			     ease-in-out='linear' 
			     dur='6000' 
			     repeat='indefinite'/>
                </a-entity>
	    
	 <a-entity class="discoball" position= "0 30 40">
		
		 <a-sphere id='disco-ball' radius= '4' material='src: #disco'>
		  	<a-animation to='0 360 0' 
				     easing='linear' 
				     dur='20000' 
				     repeat='indefinite'/>
		 </a-sphere>
		 	
		 <a-animation attribute="position"
			     direction='alternate' 
			     from='0 29 40' to='0 31 40' 
			     ease='linear' 
			     dur='8000' 
			     repeat='indefinite'/>
	  </a-entity>
	    
	<a-entity id="path1" unfolding-path="length:40" position='8 15 30.5'></a-entity>
		<a-entity id="trigger1" position="8 15 10.5" n-box-collider="isTrigger:true; type:environment; size: 8 4 47" n-container="capacity:1"
			wire="targets:#path1; gained: container-full; gain: unfolded"
			wire__0="targets:#path1; lost: container-full; lose: unfolded">
	</a-entity>
	    
	<a-entity position='15 15 30' n-object='res:effects/fireworks'></a-entity>
	<a-entity position='-15 15 30' n-object='res:effects/fireworks'></a-entity>
	<a-entity position='15 15 50' n-object='res:effects/fireworks'></a-entity>
	<a-entity position='-15 15 50' n-object='res:effects/fireworks'></a-entity>
	     
	    
<!-- architecture -->
	<a-entity class='building' position='8 15 -20' rotation="0 0 0">
		<a-entity class="room" position="0 -0.01 0">
		<a-entity class="floor-half">
			<a-entity n-object="res: architecture/floor-4w-4l" position="-6, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-6, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-6, 0, -6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-6, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="10, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="10, 0, -6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="10, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="10, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, 6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, 6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, 6"></a-entity>

			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, -6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, -6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, -6"></a-entity>

			<a-entity n-object="res: architecture/floor-slice-concave-4r" position="-6, 0, 10" rotation="0 -90 0"></a-entity>
			<a-entity n-object="res: architecture/floor-slice-concave-4r" position="10, 0, 6"></a-entity>
		</a-entity>
		<a-entity class="floor-half" position="0, 0, -20" rotation="0 180 0">
			<a-entity n-object="res: architecture/floor-4w-4l" position="-6, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-6, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-6, 0, -6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-6, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="10, 0, -10"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="10, 0, -6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="10, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="10, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, 6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, 6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, 6"></a-entity>

			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="-2, 0, -6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="2, 0, -6"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, 2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, -2"></a-entity>
			<a-entity n-object="res: architecture/floor-4w-4l" position="6, 0, -6"></a-entity>

			<a-entity n-object="res: architecture/floor-slice-concave-4r" position="-6, 0, 10" rotation="0 -90 0"></a-entity>
			<a-entity n-object="res: architecture/floor-slice-concave-4r" position="10, 0, 6"></a-entity>
		</a-entity>
		<a-entity class="ceiling-half">
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-6, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-6, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-6, 4, -6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-6, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="10, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="10, 4, -6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="10, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="10, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, 6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, 6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, 6"></a-entity>

			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, -6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, -6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, -6"></a-entity>

			<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="-6, 4, 10" rotation="0 -90 0"></a-entity>
			<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="10, 4, 6"></a-entity>
		</a-entity>
		<a-entity class="ceiling-half" position="0, 0, -20" rotation="0 180 0">
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-6, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-6, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-6, 4, -6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-6, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="10, 4, -10"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="10, 4, -6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="10, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="10, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, 6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, 6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, 6"></a-entity>

			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="-2, 4, -6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="2, 4, -6"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, 2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, -2"></a-entity>
			<a-entity n-object="res: architecture/ceiling-4w-4l" position="6, 4, -6"></a-entity>

			<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="-6, 4, 10" rotation="0 -90 0"></a-entity>
			<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="10, 4, 6"></a-entity>
		</a-entity>
		<a-entity class="walls-half">
			<a-entity n-object="res: architecture/wall-4w-4h" position="10, 4, -26" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="10, 4, -18" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="10, 4, -22" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="10, 4, -14" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="-10, 4, -26"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="-10, 4, -18"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="-10, 4, -22"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="-10, 4, -14"></a-entity>

			<a-entity n-object="res: architecture/wall-curve-convex-4r-4h" position="-6, 0, -30"></a-entity>
			<a-entity n-object="res: architecture/wall-curve-convex-4r-4h" position="-6, 4, -30"></a-entity>

			<a-entity n-object="res: architecture/wall-curve-convex-4r-4h" position="10, 0, -26" rotation="0 -90 0"></a-entity>
			<a-entity n-object="res: architecture/wall-curve-convex-4r-4h" position="10, 4, -26" rotation="0 -90 0"></a-entity>

			<a-entity n-object="res: architecture/wall-window-gap-end-l-4w-4h" position="10, 0, -26" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="10, 0, -22" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="10, 0, -18" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="10, 0, -14w" scale="-1 1 1"></a-entity>

			<a-entity n-object="res: architecture/wall-window-gap-end-l-4w-4h" position="-10, 0, -26"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="-10, 0, -22"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="-10, 0, -18"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="-10, 0, -14w"></a-entity>

			<a-entity class="railings" position="0, 0, -30">
				<a-entity class="railing-bottom" position="0, 0, 0">
					<a-entity n-object="res: architecture/railing-4l" position="-6, 0, 0" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/railing-4l" position="-2, 0, 0" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/railing-4l" position="2, 0, 0" rotation="0 90 0"></a-entity>
				</a-entity>
				<a-entity class="railing-bottom" position="0, 8, 0" rotation="0 0 180">
					<a-entity n-object="res: architecture/railing-4l" position="-6, 0, 0" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/railing-4l" position="-2, 0, 0" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/railing-4l" position="2, 0, 0" rotation="0 90 0"></a-entity>
				</a-entity>
			</a-entity>
		</a-entity>
		<a-entity class="walls-half" position="0, 0, -20" rotation="0 180 0">
			<a-entity n-object="res: architecture/wall-4w-4h" position="10, 4, -26" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="10, 4, -18" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="10, 4, -22" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="10, 4, -14" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="-10, 4, -26"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="-10, 4, -18"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="-10, 4, -22"></a-entity>
			<a-entity n-object="res: architecture/wall-4w-4h" position="-10, 4, -14"></a-entity>

			<a-entity n-object="res: architecture/wall-curve-convex-4r-4h" position="-6, 0, -30"></a-entity>
			<a-entity n-object="res: architecture/wall-curve-convex-4r-4h" position="-6, 4, -30"></a-entity>

			<a-entity n-object="res: architecture/wall-curve-convex-4r-4h" position="10, 0, -26" rotation="0 -90 0"></a-entity>
			<a-entity n-object="res: architecture/wall-curve-convex-4r-4h" position="10, 4, -26" rotation="0 -90 0"></a-entity>

			<a-entity n-object="res: architecture/wall-window-gap-end-l-4w-4h" position="10, 0, -26" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="10, 0, -22" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="10, 0, -18" scale="-1 1 1"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="10, 0, -14w" scale="-1 1 1"></a-entity>

			<a-entity n-object="res: architecture/wall-window-gap-end-l-4w-4h" position="-10, 0, -26"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="-10, 0, -22"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="-10, 0, -18"></a-entity>
			<a-entity n-object="res: architecture/wall-window-gap-4w-4h" position="-10, 0, -14w"></a-entity>

			<a-entity class="railings" position="0, 0, -30">
				<a-entity class="railing-bottom" position="0, 8, 0" rotation="0 0 180">
					<a-entity n-object="res: architecture/railing-4l" position="-6, 0, 0" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/railing-4l" position="-2, 0, 0" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/railing-4l" position="2, 0, 0" rotation="0 90 0"></a-entity>
				</a-entity>
			</a-entity>
		</a-entity>

		<a-entity class="display-case" position="0 0 -20">
			<a-entity class="geometry" position="0 0 0">
				<a-entity class="ceiling" position="0 -0.25 0">
					<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="4 4 0"></a-entity>
					<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="0 4 -4" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="-4 4 0" rotation="0 180 0"></a-entity>
					<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="0 4 4" rotation="0 270 0"></a-entity>
				</a-entity>
				<a-entity class="floor" position="0 0.25 0">
					<a-entity scale="1.5 1 1.5">
						<a-entity n-object="res: architecture/floor-slice-concave-4r" position="4 0 0"></a-entity>
						<a-entity n-object="res: architecture/floor-slice-concave-4r" position="0 0 -4" rotation="0 90 0"></a-entity>
						<a-entity n-object="res: architecture/floor-slice-concave-4r" position="-4 0 0" rotation="0 180 0"></a-entity>
						<a-entity n-object="res: architecture/floor-slice-concave-4r" position="0 0 4" rotation="0 270 0"></a-entity>
					</a-entity>

					<a-entity n-object="res: architecture/floor-slice-concave-2r" position="2 0.25 0"></a-entity>
					<a-entity n-object="res: architecture/floor-slice-concave-2r" position="0 0.25 -2" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/floor-slice-concave-2r" position="-2 0.25 0" rotation="0 180 0"></a-entity>
					<a-entity n-object="res: architecture/floor-slice-concave-2r" position="0 0.25 2" rotation="0 270 0"></a-entity>
				</a-entity>
				<a-entity class="rings">
					<a-entity scale="1.5 .8 1.5">
					<a-entity n-object="res: architecture/wall-base-curve-concave-4r" position="4 0 0"></a-entity>
					<a-entity n-object="res: architecture/wall-base-curve-concave-4r" position="0 0 -4" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/wall-base-curve-concave-4r" position="-4 0 0" rotation="0 180 0"></a-entity>
					<a-entity n-object="res: architecture/wall-base-curve-concave-4r" position="0 0 4" rotation="0 270 0"></a-entity>

					<a-entity n-object="res: architecture/wall-base-curve-convex-4r" position="4 0 0" rotation="0 270 0"></a-entity>
					<a-entity n-object="res: architecture/wall-base-curve-convex-4r" position="0 0 -4"></a-entity>
					<a-entity n-object="res: architecture/wall-base-curve-convex-4r" position="-4 0 0" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/wall-base-curve-convex-4r" position="0 0 4" rotation="0 180 0"></a-entity>
					</a-entity>
					<a-entity class="inner">
						<a-entity scale=".7 1 .7">
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="2 0.25 0" rotation="0 270 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="0 0.25 -2"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="-2 0.25 0" rotation="0 90 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="0 0.25 2" rotation="0 180 0"></a-entity>

						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="2 0.25 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="0 0.25 -2" rotation="0 90 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="-2 0.25 0" rotation="0 180 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="0 0.25 2" rotation="0 270 0"></a-entity>
						</a-entity>	
					</a-entity>

					<a-entity class="inner-upper" position="0 8 0" rotation="180 0 0">
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="2 0.25 0" rotation="0 270 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="0 0.25 -2"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="-2 0.25 0" rotation="0 90 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="0 0.25 2" rotation="0 180 0"></a-entity>

						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="2 0.25 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="0 0.25 -2" rotation="0 90 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="-2 0.25 0" rotation="0 180 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="0 0.25 2" rotation="0 270 0"></a-entity>
					</a-entity>
				</a-entity>
			</a-entity>
		</a-entity>

		<a-entity class="display-case" position="0 0 0">
			<a-entity class="geometry" position="0 0 0">
				<a-entity class="ceiling" position="0 -0.25 0">
					<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="4 4 0"></a-entity>
					<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="0 4 -4" rotation="0 90 0"></a-entity>
					<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="-4 4 0" rotation="0 180 0"></a-entity>
					<a-entity n-object="res: architecture/ceiling-slice-concave-4r" position="0 4 4" rotation="0 270 0"></a-entity>
				</a-entity>
					<a-entity class="inner-upper" position="0 8 0" rotation="180 0 0">
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="2 0.25 0" rotation="0 270 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="0 0.25 -2"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="-2 0.25 0" rotation="0 90 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-convex-2r" position="0 0.25 2" rotation="0 180 0"></a-entity>

						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="2 0.25 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="0 0.25 -2" rotation="0 90 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="-2 0.25 0" rotation="0 180 0"></a-entity>
						<a-entity n-object="res: architecture/wall-base-curve-concave-2r" position="0 0.25 2" rotation="0 270 0"></a-entity>
					</a-entity>
			</a-entity>
		</a-entity>

	</a-entity>
		<!-- Interactable Spawners -->
		<a-entity n-spawner="res:interactables/box" position="8 2 4">
			<a-animation to='0 360 0' 
				easing='linear' 
				dur='8000' 
				repeat='indefinite'/>
		</a-entity>
		<a-entity n-spawner="res:interactables/soccerball" position="8 2 3">
			<a-animation to='0 360 0' 
				easing='linear' 
				dur='8000' 
				repeat='indefinite'/>
		</a-entity>
		<a-entity n-spawner="res:interactables/bowling-pin" position="8 2 2">
			<a-animation to='0 360 0' 
				easing='linear' 
				dur='8000' 
				repeat='indefinite'/>
		</a-entity>
		<a-entity n-spawner="res:interactables/gem" position="8 2 1">
			<a-animation to='0 360 0' 
				easing='linear' 
				dur='8000' 
				repeat='indefinite'/>
		</a-entity>
		<a-entity n-spawner="res:interactables/basketball" position="8 2 0">
			<a-animation to='0 360 0' 
				easing='linear' 
				dur='8000' 
				repeat='indefinite'/>
			</a-entity>
		<a-entity n-spawner="res:interactables/bowlingball" position="8 2 -1">
			<a-animation to='0 360 0' 
				easing='linear' 
				dur='8000' 
				repeat='indefinite'/>
		</a-entity>
		<a-entity n-spawner="res:interactables/coin" position="8 2 -2">
			<a-animation to='0 360 0' 
				easing='linear' 
				dur='8000' 
				repeat='indefinite'/>
		</a-entity>
		<a-entity n-spawner="res:interactables/ring" position="8 2 -3">
			<a-animation to='0 360 0' 
				easing='linear' 
				dur='8000' 
				repeat='indefinite'/>
		</a-entity>
		<a-entity n-object="res:objects/target-archery" position="-8 2 0" rotation='0 90 0'></a-entity>
		
		<!-- Basketball Game 1-->
	    <a-entity id="game" position="8.5 -0.25 -9" rotation="0 -90 0">

			<a-entity id="scoring-area">
				<a-box color="black" scale="3 0.1 2.5" opacity="0" id="trigger-0" rotation="90 0 0" n-box-collider position="-1 1.2 1.1"></a-box>

				<a-box id="basket-container" color="yellowgreen" rotation="0 0 0" scale="1 0.25 1" material="visible:false" n-box-collider="isTrigger:true;" n-container="capacity:3" position="-1 2.1 0.5"></a-box>

				<a-entity n-object="res:objects/basketball-hoop" position="-1 2.5 0.5" rotation="0 90 0" scale="2.5 2.5 2.5">
					<a-entity  id="score-effect0" position="0 0 0">
						<a-animation attribute="rotation" dur="1500" to="0 360 0" begin="score" easing="ease" repeat="0"></a-animation>
						<a-entity position="0.25 0 0" n-object="res:effects/fire-trail"></a-entity>
					</a-entity>
					<a-entity id="score-effect1" position="0 0 0">
						<a-animation attribute="rotation" dur="1500" to="0 360 0" begin="score" direction="reverse" easing="ease" repeat="0"></a-animation>
						<a-entity position="0.25 0 0" n-object="res:effects/fire-trail"></a-entity>
					</a-entity>
				</a-entity>
			</a-entity>

			<a-entity id="backboard">
				<a-entity n-object="res:architecture/wall-2w-4h" position="1 0.5 -1" rotation="0 -90 0"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="-1 0.5 -1" rotation="0 -90 0"></a-entity>
			</a-entity>
			<a-entity id="floorboard">
				<a-entity n-object="res:architecture/floor-2w-4l" position="1 0.5 3" rotation="0 -90 0"></a-entity>
				<a-entity n-object="res:architecture/floor-2w-4l" position="-1 0.5 3" rotation="0 -90 0"></a-entity>
			</a-entity>

			<a-entity n-spawner="res:interactables/basketball" position="0.5 1.25 3">
				<a-entity position="0 0.5 0" n-object="res:effects/fire"></a-entity>
			</a-entity>
			<a-entity n-spawner="res:interactables/basketball" position="-2.5 1.25 3">
				<a-entity position="0 0.5 0" n-object="res:effects/fire"></a-entity>
			</a-entity>

			<a-entity id="info-area" position="0.5 0.5 0">
				<a-entity rotation="0 90 15" position="-2.5 4.5 -0.5">
					<a-entity n-object="res:architecture/wall-4w-4h" scale="1 0.5 0.5"></a-entity>
					<a-entity rotation="0 -90 0">
						<a-entity n-text="text:SCORE;" scale="0.65 0.65 0.65" position="1 1.5 0.1"></a-entity>
						<a-entity id="score-text" n-text="text:0" position="1 0.65 0.1"></a-entity>
					</a-entity>
				</a-entity>

				<a-entity rotation="0 60 0" position="1.25 2 0">
					<a-entity n-object="res:architecture/wall-4w-4h" scale="1 0.5 0.5"></a-entity>
					<a-entity rotation="0 -90 0">
						<a-entity n-text="text:HIGHSCORE;" scale="0.3 0.5 0.5" position="1 1.55 0.1"></a-entity>
						<a-entity id="highscore-score-text"  n-text="" position="1 0.85 0.1" scale="0.75 0.75 0.75"></a-entity>
						<a-entity id="highscore-name-text" n-text="" scale="0.5 0.5 0.5" position="1 0.25 0.1"></a-entity>
					</a-entity>
				</a-entity>

				<a-entity rotation="0 120 0" position="-6 2 1">
					<a-entity n-object="res:architecture/wall-4w-4h" scale="1 0.5 0.5"></a-entity>
					<a-entity rotation="0 -90 0">
						<a-entity n-text="text:CLOCK;" scale="0.5 0.5 0.5" position="1 1.5 0.1"></a-entity>
						<a-entity id="clock-text" n-text="" position="1 0.65 0.1"></a-entity>
					</a-entity>
				</a-entity>
			</a-entity>
		    
			<a-entity class="wall" position="0.5 0.5 0">
				<a-entity n-object="res:architecture/railing-4l" position="-0.125 2.5 -0.25" rotation="45 0 0" scale="1 0.5 1"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 -0.5" rotation="0 0 0" scale="1 1 0.25"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 0" rotation="0 0 0" scale="1 0.5 0.5"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 1" rotation="0 0 0" scale="1 0.25 0.5"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 2" rotation="0 0 0" scale="1 0.125 0.5"></a-entity>

			</a-entity>

			<a-entity class="wall" position="-3 0.5 0">
				<a-entity n-object="res:architecture/railing-4l" position="0.5 2.5 -0.25" rotation="45 0 0" scale="1 0.5 1"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 -0.5" rotation="0 0 0" scale="1 1 0.25"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 0" rotation="0 0 0" scale="1 0.5 0.5"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 1" rotation="0 0 0" scale="1 0.25 0.5"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 2" rotation="0 0 0" scale="1 0.125 0.5"></a-entity>
			</a-entity>
		</a-entity>
		
		
		<!-- Basketball Game 2 -->
	    <a-entity id="game2" position="-8.5 -0.25 -11" rotation="0 90 0">

			<a-entity id="scoring-area2">
				<a-box color="black" scale="3 0.1 2.5" opacity="0" id="trigger-02" rotation="90 0 0" n-box-collider position="-1 1.2 1.1"></a-box>

				<a-box id="basket-container2" color="yellowgreen" rotation="0 0 0" scale="1 0.25 1" material="visible:false" n-box-collider="isTrigger:true;" n-container="capacity:3" position="-1 2.1 0.5"></a-box>

				<a-entity n-object="res:objects/basketball-hoop" position="-1 2.5 0.5" rotation="0 90 0" scale="2.5 2.5 2.5">
					<a-entity  id="score-effect02" position="0 0 0">
						<a-animation attribute="rotation" dur="1500" to="0 360 0" begin="score2" easing="ease" repeat="0"></a-animation>
						<a-entity position="0.25 0 0" n-object="res:effects/fire-trail"></a-entity>
					</a-entity>
					<a-entity id="score-effect12" position="0 0 0">
						<a-animation attribute="rotation" dur="1500" to="0 360 0" begin="score2" direction="reverse" easing="ease" repeat="0"></a-animation>
						<a-entity position="0.25 0 0" n-object="res:effects/fire-trail"></a-entity>
					</a-entity>
				</a-entity>
			</a-entity>

			<a-entity id="backboard">
				<a-entity n-object="res:architecture/wall-2w-4h" position="1 0.5 -1" rotation="0 -90 0"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="-1 0.5 -1" rotation="0 -90 0"></a-entity>
			</a-entity>
			<a-entity id="floorboard">
				<a-entity n-object="res:architecture/floor-2w-4l" position="1 0.5 3" rotation="0 -90 0"></a-entity>
				<a-entity n-object="res:architecture/floor-2w-4l" position="-1 0.5 3" rotation="0 -90 0"></a-entity>
			</a-entity>

			<a-entity n-spawner="res:interactables/basketball" position="0.5 1.25 3">
				<a-entity position="0 0.5 0" n-object="res:effects/fire"></a-entity>
			</a-entity>
			<a-entity n-spawner="res:interactables/basketball" position="-2.5 1.25 3">
				<a-entity position="0 0.5 0" n-object="res:effects/fire"></a-entity>
			</a-entity>

			<a-entity id="info-area2" position="0.5 0.5 0">
				<a-entity rotation="0 90 15" position="-2.5 4.5 -0.5">
					<a-entity n-object="res:architecture/wall-4w-4h" scale="1 0.5 0.5"></a-entity>
					<a-entity rotation="0 -90 0">
						<a-entity n-text="text:SCORE;" scale="0.65 0.65 0.65" position="1 1.5 0.1"></a-entity>
						<a-entity id="score-text2" n-text="text:0" position="1 0.65 0.1"></a-entity>
					</a-entity>
				</a-entity>

				<a-entity rotation="0 60 0" position="1.25 2 0">
					<a-entity n-object="res:architecture/wall-4w-4h" scale="1 0.5 0.5"></a-entity>
					<a-entity rotation="0 -90 0">
						<a-entity n-text="text:HIGHSCORE;" scale="0.3 0.5 0.5" position="1 1.55 0.1"></a-entity>
						<a-entity id="highscore-score-text2"  n-text="" position="1 0.85 0.1" scale="0.75 0.75 0.75"></a-entity>
						<a-entity id="highscore-name-text2" n-text="" scale="0.5 0.5 0.5" position="1 0.25 0.1"></a-entity>
					</a-entity>
				</a-entity>

				<a-entity rotation="0 120 0" position="-6 2 1">
					<a-entity n-object="res:architecture/wall-4w-4h" scale="1 0.5 0.5"></a-entity>
					<a-entity rotation="0 -90 0">
						<a-entity n-text="text:CLOCK;" scale="0.5 0.5 0.5" position="1 1.5 0.1"></a-entity>
						<a-entity id="clock-text2" n-text="" position="1 0.65 0.1"></a-entity>
					</a-entity>
				</a-entity>
			</a-entity>
			<a-entity class="wall" position="0.5 0.5 0">
				<a-entity n-object="res:architecture/railing-4l" position="-0.125 2.5 -0.25" rotation="45 0 0" scale="1 0.5 1"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 -0.5" rotation="0 0 0" scale="1 1 0.25"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 0" rotation="0 0 0" scale="1 0.5 0.5"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 1" rotation="0 0 0" scale="1 0.25 0.5"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 2" rotation="0 0 0" scale="1 0.125 0.5"></a-entity>

			</a-entity>

			<a-entity class="wall" position="-3 0.5 0">
				<a-entity n-object="res:architecture/railing-4l" position="0.5 2.5 -0.25" rotation="45 0 0" scale="1 0.5 1"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 -0.5" rotation="0 0 0" scale="1 1 0.25"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 0" rotation="0 0 0" scale="1 0.5 0.5"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 1" rotation="0 0 0" scale="1 0.25 0.5"></a-entity>
				<a-entity n-object="res:architecture/wall-2w-4h" position="0 0 2" rotation="0 0 0" scale="1 0.125 0.5"></a-entity>
			</a-entity>
		</a-entity>
	</a-entity>
      
	    
    <!-- add a view camera (2d only) -->
    <a-entity position='0 0 2'>
        <a-camera></a-camera>
    </a-entity>
	    
<a-box id='test' position='3 0 3' material='src: #water;'></a-box>
      
 
	   
    </a-scene>
	  
<script>
var changeColorRandom = function(){
	var rand = function() { return Math.floor(Math.random() * 255)};
	var boxes = document.getElementsByClassName("discofloor");
		for (var i = 0; i < boxes.length; i++) {
        var box = boxes[i];
	    box.setAttribute('material', 'color', 'rgb('+rand()+','+rand()+','+rand()+')');
    }
}
setInterval(changeColorRandom, 2000);
</script>	  
	  
	    
	<!-- Random Color Generator -->  
<!-- <script>
		var setRandomColor = function(el) {
			var getRandColor = function() {
				// creating a random number between 0 and 255
				var r = Math.random();
				var g = Math.random();
				var b = Math.random();
				return new THREE.Color(r, g, b);
			};
			el.setAttribute('material', 'color', getRandColor());
		}
		var boxEl = document.querySelector('.discofloor');
		boxEl.addEventListener('change-color', function(event) {
		setRandomColor(event.target);	
		});
		var boxEl = document.querySelector('.discofloor2');
		boxEl.addEventListener('change-color', function(event) {
		setRandomColor(event.target);	
		});
		var boxEl = document.querySelector('.discofloor3');
		boxEl.addEventListener('change-color', function(event) {
		setRandomColor(event.target);	
		});
</script> -->
	 
<!-- <a id="zeriportal" href="https://account.altvr.com/events/587280503816585742"></a>
	  
<script>
//Zerithax's Relatively Shit Portal
UltimateLoader.load('https://rawgit.com/Zerithax/zerithax.github.io/master/Hub/Doors/Portal.obj', function(object)
{
    // Object has finished loading, add it to the scene
   object.scale.set(4.5, 5, 4.5);
   object.position.set(0,0,0);
   object.rotation.set(0,0,0);
   object.addEventListener("cursorup", function()
   {
       document.getElementById("zeriportal").click();
   });
  scene.add(object);
});
</script> -->
	  
<script> 
		(function(){
	document.addEventListener('DOMContentLoaded', function(){
		var TimeLimit = 60;
		var countdownInterval;
		var clockTime = TimeLimit;

		var basket = document.querySelector('#basket-container');
		var scoreText = document.querySelector('#score-text');
		var highscoreScoreText = document.querySelector('#highscore-score-text');
		var highscoreNameText = document.querySelector('#highscore-name-text');
		var clockText = document.querySelector('#clock-text');
		var scoreEffect0 = document.querySelector('#score-effect0');
		var scoreEffect1 = document.querySelector('#score-effect1');

		window.game = {
			basket: basket,
			scoreText: scoreText,
			clockText: clockText,
			highscoreScoreText: highscoreScoreText,
			highscoreNameText: highscoreNameText,
			scoreEffect0: scoreEffect0,
			scoreEffect1: scoreEffect1,
		};

		altspace.getUser().then(function(user){
			game.username = user.displayName;
		});

		basket.addEventListener('container-count-changed', function(event){
			if(event.detail.count > event.detail.oldCount && event.detail.count > 0){
				console.log('score changing from ' + event.detail.oldCount + ' to ' + event.detail.count);
				scoreGoal();
			}
		});

		function initHighscore(){
			var scene = document.querySelector('a-scene');
			setTimeout(function(){
				var syncSys = scene.systems['sync-system'];
				runAfterConnected(syncSys, function(){
					var highscoreRef = syncSys.connection.app.child('highscore');
					window.game.highscoreRef = highscoreRef;
					refreshHighscoreboard();
				});
			}, 500);
		}

		function refreshHighscoreboard(){
			game.highscoreRef.once('value', function(data){
				var val = data.val();
				console.dir('refreshed highscoreboard to: ');
				console.dir(val);
				window.game.highscoreScoreText.setAttribute('n-text', 'text:' + val.score);
				window.game.highscoreNameText.setAttribute('n-text', 'text:' + val.name);
			});
		}

		function refreshScoreboard(){
			game.scoreText.setAttribute('n-text', 'text:' + game.score);
		}

		function refreshClock(){
			game.clockText.setAttribute('n-text', 'text:' + clockTime);
		}

		function scoreGoal(){
			game.score++;
			game.scoreEffect0.emit('score');
			game.scoreEffect1.emit('score');
			refreshScoreboard();
		}

		function newGame(){
			game.score = 0;
			refreshScoreboard();
			newCountdown();
		}

		function newCountdown(){
			clockTime = TimeLimit;
			countdownInterval = setInterval(function(){
				clockTime--;

				if(clockTime < 0){
					endGame();
				}

				refreshClock();
			}, 1000);
		}

		function endGame(){

			clockTime = 0;
			clearInterval(countdownInterval)
			setTimeout(function(){
				newGame();
			}, 5000);

			function scoreHighscore(){//right now everyone in the space is going to do this at the same time
				console.log('scoring highscore' + game.score);
				game.highscoreRef.set({
					score: this.game.score,
					name: game.username//race condition
				})
				refreshHighscoreboard();
			}


			game.highscoreRef.once('value', function(data){
				var val = data.val();

				console.dir('checking highscore: ');
				console.dir(val);

				if(!val || !val.score){
					scoreHighscore();
				}

				if(val.score <= game.score){
					scoreHighscore();
				}
			});
		}

		function runAfterConnected(syncSys, callback){
			if(syncSys.connection){
				callback();
			} else {
				syncSys.sceneEl.addEventListener('connected', function(){
					callback();
				});
			}
		}

		//main

		initHighscore();
		newGame();
	});
})();
</script>
	  
<script> 
		(function(){
	document.addEventListener('DOMContentLoaded', function(){
		var TimeLimit = 60;
		var countdownInterval;
		var clockTime = TimeLimit;
		var basket = document.querySelector('#basket-container2');
		var scoreText = document.querySelector('#score-text2');
		var highscoreScoreText = document.querySelector('#highscore-score-text2');
		var highscoreNameText = document.querySelector('#highscore-name-text2');
		var clockText = document.querySelector('#clock-text2');
		var scoreEffect02 = document.querySelector('#score-effect02');
		var scoreEffect12 = document.querySelector('#score-effect12');
		window.game2 = {
			basket: basket,
			scoreText: scoreText,
			clockText: clockText,
			highscoreScoreText: highscoreScoreText,
			highscoreNameText: highscoreNameText,
			scoreEffect02: scoreEffect02,
			scoreEffect12: scoreEffect12,
		};
		altspace.getUser().then(function(user){
			game2.username = user.displayName;
		});
		basket.addEventListener('container-count-changed', function(event){
			if(event.detail.count > event.detail.oldCount && event.detail.count > 0){
				console.log('score changing from ' + event.detail.oldCount + ' to ' + event.detail.count);
				scoreGoal();
			}
		});
		function initHighscore(){
			var scene = document.querySelector('a-scene');
			setTimeout(function(){
				var syncSys = scene.systems['sync-system'];
				runAfterConnected(syncSys, function(){
					var highscoreRef = syncSys.connection.app.child('highscore2');
					window.game2.highscoreRef = highscoreRef;
					refreshHighscoreboard();
				});
			}, 500);
		}
		function refreshHighscoreboard(){
			game2.highscoreRef.once('value', function(data){
				var val = data.val();
				console.dir('refreshed highscoreboard to: ');
				console.dir(val);
				window.game2.highscoreScoreText.setAttribute('n-text', 'text:' + val.score);
				window.game2.highscoreNameText.setAttribute('n-text', 'text:' + val.name);
			});
		}
		function refreshScoreboard(){
			game2.scoreText.setAttribute('n-text', 'text:' + game2.score);
		}
		function refreshClock(){
			game2.clockText.setAttribute('n-text', 'text:' + clockTime);
		}
		function scoreGoal(){
			game2.score++;
			game2.scoreEffect02.emit('score2');
			game2.scoreEffect12.emit('score2');
			refreshScoreboard();
		}
		function newGame(){
			game2.score = 0;
			refreshScoreboard();
			newCountdown();
		}
		function newCountdown(){
			clockTime = TimeLimit;
			countdownInterval = setInterval(function(){
				clockTime--;
				if(clockTime < 0){
					endGame();
				}
				refreshClock();
			}, 1000);
		}
		function endGame(){
			clockTime = 0;
			clearInterval(countdownInterval)
			setTimeout(function(){
				newGame();
			}, 5000);
			function scoreHighscore(){//right now everyone in the space is going to do this at the same time
				console.log('scoring highscore' + game2.score);
				game2.highscoreRef.set({
					score: this.game2.score,
					name: game2.username//race condition
				})
				refreshHighscoreboard();
			}
			game2.highscoreRef.once('value', function(data){
				var val = data.val();
				console.dir('checking highscore: ');
				console.dir(val);
				if(!val || !val.score){
					scoreHighscore();
				}
				if(val.score <= game2.score){
					scoreHighscore();
				}
			});
		}
		function runAfterConnected(syncSys, callback){
			if(syncSys.connection){
				callback();
			} else {
				syncSys.sceneEl.addEventListener('connected', function(){
					callback();
				});
			}
		}
		//main
		initHighscore();
		newGame();
	});
})();
	</script>
	  
	<script>
	 AFRAME.registerComponent('unfolding-path',
	{
		schema: {
			length: {type: 'int'}
		},
		init: function(){
			var component = this;
			var duration = 500;
			var gap = 0.1;
			var tileWidth = 4;
			//todo meet in middle
			function unfold(){
				var max = component.data.length / tileWidth;
				var i;
				var halfMax = Math.floor(max / 2);
				var secondHalfMax = max - halfMax;
				for(i = 0; i < halfMax; i++){
					console.log(i);
					var z = -i * tileWidth - (tileWidth * gap);
					var section = document.createElement("a-entity");
					component.el.appendChild(section);
					section.setAttribute('rotation', '90 180 0');
					section.setAttribute('position', '-2 -2 0');
					section.setAttribute('scale', '1 1 ' + (1 - gap));
					section.setAttribute('n-object', 'res', 'architecture/floor-4w-4l');
					var animation = document.createElement("a-animation");
					animation.setAttribute('attribute', 'rotation');
					animation.setAttribute('dur', duration);
					animation.setAttribute('to', '0 180 0');
					animation.setAttribute('delay', duration * 0.8 * i);
					animation.setAttribute('easing', 'ease');
					section.appendChild(animation);
					animation = document.createElement("a-animation");
					animation.setAttribute('attribute', 'position');
					animation.setAttribute('dur', duration);
					animation.setAttribute('to', '-2 0 ' + z);
					animation.setAttribute('delay', duration * 0.8 * i);
					animation.setAttribute('easing', 'ease');
					section.appendChild(animation);
				}
				for(var j = 0; j < secondHalfMax; j++){
					console.log(j);
					var z = -(secondHalfMax - j) * tileWidth - (halfMax * tileWidth);
					var section = document.createElement("a-entity");
					component.el.appendChild(section);
					section.setAttribute('rotation', '90 0 0');
					section.setAttribute('position', '2 -2 ' + max * -tileWidth);
					section.setAttribute('scale', '1 1 ' + (1 - gap));
					section.setAttribute('n-object', 'res', 'architecture/floor-4w-4l');
					var animation = document.createElement("a-animation");
					animation.setAttribute('attribute', 'rotation');
					animation.setAttribute('dur', duration);
					animation.setAttribute('to', '0 0 0');
					animation.setAttribute('delay', duration * 0.8 * j);
					animation.setAttribute('easing', 'ease');
					section.appendChild(animation);
					animation = document.createElement("a-animation");
					animation.setAttribute('attribute', 'position');
					animation.setAttribute('dur', duration);
					animation.setAttribute('to', '2 0 ' + z);
					animation.setAttribute('delay', duration * 0.8 * j);
					animation.setAttribute('easing', 'ease');
					section.appendChild(animation);
				}
			}
			function fold(){
				component.el.innerHTML = '';
			}
			component.onStateAdded = function(){
				var state = event.detail.state;
				if (state === "unfolded") {
					unfold();
				}
			}
			component.onStateRemoved = function(){
				var state = event.detail.state;
				if (state === "unfolded") {
					fold();
				}
			}
			this.el.addEventListener('stateadded', component.onStateAdded);
			this.el.addEventListener('stateremoved', component.onStateRemoved);
		}
	});
	</script>
	  
<script>
//Pretty text functions from HaH (https://github.com/AltspaceVR/HaH)
     var fontScale;
     if (/AltspaceVR-App build-[0-9a-f]{7} Mobile/.test(navigator.userAgent)) {
         fontScale = 0.85;
     } else {
         fontScale = 1.0;
     }

     function makeSafeFont(g, text, maxWidth) {
         // get pixel width of longest line
         var textWidth = Math.max.apply(null, text.map(function(s) {
             return g.measureText(s).width;
         }));
         // if longest line is longer than specified max width
         if (textWidth > maxWidth) {
             // scale down font to bring width down to maxWidth
             var font = g.font;
             var fontSize = /[0-9.]+px/.exec(font)[0];
             var fontSizeValue = parseFloat(fontSize);
             fontSizeValue = (maxWidth / textWidth) * fontSizeValue;
             font = font.replace(fontSize, fontSizeValue + 'px');

             g.font = font;
         }
     }

     function generateTextMaterial(text, options) {
         var texWidth = options.width || 256;
         var fontStack = '"Verdana", "Book Antiqua", Palatino, serif';

         // set up canvas
         var bmp = document.createElement('canvas');
         var ctx = bmp.getContext('2d');
         bmp.width = texWidth;
         bmp.height = options.height || texWidth;

         ctx.fillStyle = options.backgroundColor;
         ctx.fillRect(0, 0, texWidth, options.height || texWidth);

         // TODO: We can simplify this code if the nameplates had a sane UV mapping
         ctx.font = '' + ((options.fontScale || 0.1) * bmp.height * fontScale) + 'px ' + fontStack;
         makeSafeFont(ctx, [text], 0.9 * texWidth * fontScale);
         ctx.textAlign = 'center';
         if (options.textBaseline) {
             ctx.textBaseline = options.textBaseline;
         }
         if (options.fillStyle) {
             ctx.fillStyle = options.fillStyle;
         } else {
             ctx.fillStyle = 'black';
         }
         if (options.single) {
             ctx.lineWidth = 5;
             ctx.strokeText(text, texWidth / 2, bmp.height / 2);
             ctx.fillText(text, texWidth / 2, bmp.height / 2);
         } else {
             ctx.fillText(text, texWidth / 2, 35);
             ctx.fillText(text, texWidth / 2, 86);
         }

         return new THREE.MeshBasicMaterial({
             map: new THREE.CanvasTexture(bmp)
         });
     }

     function generateColorTextMaterial(text, w, h) {
         var statusMat = generateTextMaterial(text, {
             backgroundColor: 'transparent',
             height: 50 * h,
             width: 256 * w,
             single: true,
             fontScale: fontScale,
             textBaseline: 'middle',
             fillStyle: 'white'
         });
         statusMat.transparent = true;
         statusMat.side = THREE.DoubleSide;
         return statusMat;
     }

     //Create sphere and text
     var sim = altspace.utilities.Simulation();
     var geometry = new THREE.SphereGeometry(1.6, 32, 32);
     var material = new THREE.MeshBasicMaterial({
         color: 0x8BBBB2 
     });
     material.side = THREE.DoubleSide;
     var sphere = new THREE.Mesh(geometry, material);
     sphere.position.y = 1.9;
     sim.scene.add(sphere);
     var loading_material = generateColorTextMaterial("Welcome! Hold still while everything loads  Loading: 0%", 8, 4);
     var plane = new THREE.Mesh(new THREE.PlaneGeometry(1.5, 0.3), loading_material);
     plane.overdraw = true;
     plane.material.side = THREE.DoubleSide;
     plane.position.y = 1.9;
     plane.position.z = -0.7;
     sim.scene.add(plane);

     THREE.DefaultLoadingManager.onProgress = function(item, loaded, total) {
             var percent = loaded / total;
             if (percent == 1) {
				 //Give things a bit of time to render.
                 var material_new = generateColorTextMaterial("Welcome! Hold still while everything loads  Loading: 60%", 8, 4);
                 plane.material = material_new;
                 plane.needsUpdate = true;
                 setTimeout(function(e) {
                     var material_new = generateColorTextMaterial("Welcome! Hold still while everything loads  Loading: 80%", 8, 4);
                     plane.material = material_new;
                     plane.needsUpdate = true;
                 }, 8000);
                 setTimeout(function(e) {
                     sim.scene.remove(sphere);
                     sim.scene.remove(plane);
                 }, 20000);
             } else {
                 var material_new = generateColorTextMaterial("Welcome! Hold still while everything loads  Loading: " + Math.round(percent * 0.5) + "%", 8, 4);
                 plane.material = material_new;
                 plane.needsUpdate = true;
             }
     };

     //Remove after 60 seconds, a timeout in the case where the loading sphere randomly doesn't remove for GearVR users.
     setTimeout(function(e) {
         sim.scene.remove(sphere);
         sim.scene.remove(plane);
     }, 60000);
</script>
	  

  </body>
		
</html>
